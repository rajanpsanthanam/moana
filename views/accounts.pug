extends manage-header.pug

block main-pane
  br
  .row
    .col-md-2
      h4 Filters
      form(role='form', action="/accounts/", method="get", style='max-width: 300px;')
        .form-group
          label(for='primary_manager') Assignee
          select.form-control(name='primary_manager')
            option all
            for user in users
              option(value=user._id, selected=user.username == filters.primary_manager) #{user.username}
        .form-group
          label(for='secondary_manager') Owner
          select.form-control(name='secondary_manager', value=filters.secondary_manager)
            option all
            for user in users
              option(value=user._id, selected=user.username == filters.secondary_manager) #{user.username}
        button.btn.btn-secondary(type='submit') Submit

    .col-md-10
      .row
        .col-sm-10
          form(role='form', action="/accounts/", method="get")
            .input-group
              input.form-control(type='text', placeholder='Search for...', name='name')
              span.input-group-btn
                button.btn.btn-secondary(type='submit') Go!
        .col-sm-2
          a.btn.btn-secondary(href='/accounts/add', role='button') Add Task
      br
      .row
        for account in accounts
          .col-sm-6
            .card
              .card-body
                h5.card-title #{account.name}
                - var len = account.stages.length
                if(len > 0)
                  - var stage = account.stages[len-1].stage
                  p.card-text #{stage.name}
                else
                  p.card-text Not Started Yet
                a.btn.btn-primary(href='/accounts/view/'+account.name) read more
            br
